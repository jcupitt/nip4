## tab drag

- drag tab onto existing mainwindow does not reparent workspace

	add reparent code to workspacegroupview_switch_page_cb()?

## rowview menu

- right click menu on row and ws background position popup menu correctly, but
  trigger an unwanted scroll event :(

  maybe the rowview and ws menu popups should be on the enclosing and
  unscrolling wsg instead? this is what imagewindow does (I think?)

## imagewindow

- open view, change row once works, change row a seecond time fails to update

- should share tilesource between iimageview and imagewindow? we seem to
  reload right now

- next/prev image in imagewindow should update iimage?

  scale/offset/etc. in imagewindow should update iimage?

- paste into image window

  clipboard paste will need to write a new imageinfo to the heap, and
  can't be saved in workspace files

  in imagewindow_open_current_file() we write the filename back to the iimage,
  but this needs to handle iamges without filenames too

  maybe iimage should listen for "changed" in viewers and update the
  thumbnail and model?

- imagewindow progress stuff should go?

- hook up a progress bar for eg st-francis.jpg load?

- make a "progress" widget with throttled updates? could share with
  saveoptions, and move some code out of mainwindow

	we have progress.c, does that work?

- add region display

## toolkit browser

- use a filemanager style left bar for the toolkit browser

	does this need libadiwata?

	where should workspace local defs go?

	need something like lpane / rpane

## small

- ^S on workspace with no associated file does not pop up save dialog

- status bar? space free indicator is handy ... could this go somewhere else?
  maybe in "about"?

  polish "about nip4"

- there's a 20ms timeout in vobject_refresh_queue() ... tune this

- we have workspacegroup_save_selected() and workspace_selected_save() ???

- try

	save with no filename
	pops save dialog
	save wsg
	... but does not set filename on filemodel
	don't see filename in header bar

## ideas

- look at adding file type stuff, there are hooks for it, see
  gtk_file_dialog_set_default_filter() and:

	https://docs.gtk.org/gtk4/class.FileFilter.html

- we have the css_name thing in several _refresh() methods ... should this be
  in the base class?

## can't fix

- open dialogs have a "open read only" toggle at the bottom argh

	not clear how to remove this

- scroll to selected on ws change is annoying, where does it come from>?

	comment out workspacegroupview_switch_page_cb() and it's still there

  add a breakpoint for the scrolling and see what triggers it

  do we have a separate scrolled_window for each tab? what does the
  gtk_adjustment_set_value for the swin when we flip to it?

	wtf gtk_adjustment_set_value() is not being called on page flip,
	yet it's scrolling!

	maybe we should reset the scrollbars in
	workspacegroupview_switch_page_cb() from the saved view port

	no idea why this is happening

- expand and close buttons in column title should be grey when label text is
  grey

	doesn't seem to be possible with gtkimage

  column entry needs a background colour to make it more visible

	entry text {
	  background-color: dimgrey;
	}

  works, but looks terrible

- imagedisplay should not draw the focus rect ... get the base widget class
  to do that for us

	  doesn't seem to be possible with drawing area?

- see if having a rowview menu for every row has a significant overhead

	x.ws has 1,000 rows

		before 366mb
		after: 566mb

	about 200mb, so /1000 is 200kb per row

	a significant saving!

	ws load is much faster without a menu per row

- when we drag a tab out, can we position the new window more intelligently?

	doesn't seem to be possible

- tab name vanishes in old wsgview, current tab indicators stop working

	in workspacegroupview_create_window_cb()

	is workspaceviewlabel doing something wrong?

	maybe we can force a redraw somehow?

	wsview->label hide/show?

		tried lots of things, none worked

	newer gtk4 doesn't seem to help

